<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>OpenAB: Setup and Build</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenAB
   &#160;<span id="projectnumber">1.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('setupOpenAB.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Setup and Build </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#getSourceOpenAB">Getting the Source Code</a></li>
<li class="level1"><a href="#buildOpenAB">Building OpenAB</a><ul><li class="level2"><a href="#buildLocalOpenAB">Local OpenAB build</a><ul><li class="level3"><a href="#buildLocalOpenAB1">Setup the Environment</a></li>
<li class="level3"><a href="#buildLocalOpenAB2">First configuration (autogen.sh)</a></li>
<li class="level3"><a href="#buildLocalOpenAB3">Build and Install</a></li>
<li class="level3"><a href="#buildLocalOpenAB4">Tests and Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#quality">Quality checks</a><ul><li class="level2"><a href="#unitTests">Unit Tests</a><ul><li class="level3"><a href="#runningTests">Running Unit Tests</a></li>
<li class="level3"><a href="#generateCoverage">Generating coverage report</a></li>
</ul>
</li>
<li class="level2"><a href="#cppcheck">Cppcheck</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="getSourceOpenAB"></a>
Getting the Source Code</h1>
<p><a href="https://github.com/GENIVI/open-adress-book">https://github.com/GENIVI/open-adress-book</a></p>
<h1><a class="anchor" id="buildOpenAB"></a>
Building OpenAB</h1>
<p>In the main source tree, the file <b>autogen.sh</b> can be used to generate all the required files (Makefiles, Configure)</p>
<h2><a class="anchor" id="buildLocalOpenAB"></a>
Local OpenAB build</h2>
<p>This example explain the few steps required to build and install <a class="el" href="namespaceOpenAB.html" title="namespace OpenAB ">OpenAB</a> in any folder (i.e. <b>/tmp/OpenAB_inst</b>)</p>
<h3><a class="anchor" id="buildLocalOpenAB1"></a>
Setup the Environment</h3>
<p>As reference I'm using this folder structure:</p>
<ul>
<li><b>/tmp/OpenAB_src</b> : folder where the sources are stored </li>
<li><b>/tmp/OpenAB_build</b> : build folder (there is no restriction to use the same source folder) </li>
<li><b>/tmp/OpenAB_examples</b> : build folder (there is no restriction to use the same source folder) </li>
<li><b>/tmp/OpenAB_inst</b> : the folder where everything will be installed (if not specified "/usr/local" is the default one)</li>
</ul>
<div class="fragment"><div class="line">mkdir /tmp/OpenAB_src</div>
<div class="line">mkdir /tmp/OpenAB_build</div>
<div class="line">mkdir /tmp/OpenAB_examples</div>
<div class="line">mkdir /tmp/OpenAB_inst</div>
</div><!-- fragment --><h3><a class="anchor" id="buildLocalOpenAB2"></a>
First configuration (autogen.sh)</h3>
<p>The <b>autogen.sh</b> script is responsible to launch the <b>autoreconf</b> and the <b>configure</b> script.</p>
<p>It accept all the parameters that will be passed to the <b>configure</b> script.</p>
<p>To show the <b>configure</b> options, just type:</p>
<div class="fragment"><div class="line">cd /tmp/OpenAB_build</div>
<div class="line">../OpenAB_src/autogen.sh --help</div>
</div><!-- fragment --><p>To start creating the building environment, use all the required configure parameters with autogen.</p>
<dl class="section note"><dt>Note</dt><dd>In this example I'm enabling the EDS backend and the doxygen documentation build (these may not be available in the target system), please be aware of all the options that can be chosen using the <b>&ndash;help</b> command.</dd>
<dd>
The <b>prefix</b> where all the packages will be installed is defined in this phase. All the libraries, include, .pc and other files will reference this as base folder.</dd></dl>
<div class="fragment"><div class="line">cd /tmp/OpenAB_build</div>
<div class="line">../OpenAB_src/autogen.sh --enable-eds-backend --enable-doc --prefix=/tmp/OpenAB_inst</div>
</div><!-- fragment --><h3><a class="anchor" id="buildLocalOpenAB3"></a>
Build and Install</h3>
<p>All the Makefiles are generated using the previous command, it is time to build and install.</p>
<div class="fragment"><div class="line">cd /tmp/OpenAB_build</div>
<div class="line">make install</div>
</div><!-- fragment --><h3><a class="anchor" id="buildLocalOpenAB4"></a>
Tests and Examples</h3>
<p><b>1</b>) Copy the source examples in the <b>OpenAB_examples</b> folder</p>
<div class="fragment"><div class="line">    cd /tmp/OpenAB_examples</div>
<div class="line">    cp ../OpenAB_src/test/plugin/example<span class="comment">/* .</span></div>
<div class="line"><span class="comment">* </span></div>
</div><!-- fragment --><p><b>2</b>) Since the package has been installed in a non standard folder, the <b>pkg-config</b> tool is not able to find it unless specified in the <b>PKG_CONFIG_PATH</b> variable</p>
<div class="fragment"><div class="line">export PKG_CONFIG_PATH=/tmp/OpenAB_inst/lib/pkgconfig</div>
</div><!-- fragment --><p>all the <a class="el" href="namespaceOpenAB.html" title="namespace OpenAB ">OpenAB</a> libraries have their own <b></b>.pc file defined. A full list of <a class="el" href="namespaceOpenAB.html" title="namespace OpenAB ">OpenAB</a> libraries can be retrieved using: </p><div class="fragment"><div class="line">pkg-config --list-all | grep OpenAB</div>
</div><!-- fragment --><p><b>3</b>) Everything is on place to build any source code using the <a class="el" href="namespaceOpenAB.html" title="namespace OpenAB ">OpenAB</a> tools</p>
<p>These files are explained in <a class="el" href="pluginInterface.html#detailedExample">Detailed Example</a></p>
<p>To build the plugin object, use:</p>
<div class="fragment"><div class="line">g++ plugin*.cpp `pkg-config OpenAB_plugin --libs --cflags` -shared -fPIC -o libPlugin.so</div>
</div><!-- fragment --><p>To build the executable, use:</p>
<div class="fragment"><div class="line">g++ <a class="code" href="caldav__helper__tester_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>.cpp genericInterface.cpp \</div>
<div class="line">    `pkg-config OpenAB_plugin --libs --cflags` \</div>
<div class="line">    -DEXAMPLE_SHARED \</div>
<div class="line">    -o sharedExample.out</div>
</div><!-- fragment --><h1><a class="anchor" id="quality"></a>
Quality checks</h1>
<h2><a class="anchor" id="unitTests"></a>
Unit Tests</h2>
<h3><a class="anchor" id="runningTests"></a>
Running Unit Tests</h3>
<p>To enable unit tests build provide <b>&ndash;enable-tests</b> option to <b>configure</b> script (enabled by default). Unit tests require GTest to be installed, in case where it won't be detected, unit tests will be simply disabled. To build and run unit tests just type <b>make</b> <b>check</b> after configuring project with unit tests support. </p><div class="fragment"><div class="line">cd /tmp/OpenAB_build</div>
<div class="line">../OpenAB_src/autogen.sh --enable-eds-backend --enable-doc --enable-tests --prefix=/tmp/OpenAB_inst</div>
<div class="line">make check</div>
</div><!-- fragment --><h3><a class="anchor" id="generateCoverage"></a>
Generating coverage report</h3>
<p>To be able to generate coverage report provide <b>&ndash;enable-coverage</b> option to <b>configure</b> script (disabled by default). This feature requires LCov and Genhtml tools to be installed, simillar like in case of unit tests, if one of these tools won't ba available, coverage will be automatically disabled. To generate coverage report just type <b>make</b> <b>generate-coverage</b>, it will build unit tests, run them and generate HTML coverage report in tests/coveragereport folder. To clear coverage calculations use <b>make</b> <b>clean-coverage</b>. </p><div class="fragment"><div class="line">cd /tmp/OpenAB_build</div>
<div class="line">../OpenAB_src/autogen.sh --enable-eds-backend --enable-doc --enable-tests --enable-coverage --prefix=/tmp/OpenAB_inst</div>
<div class="line">make generate-coverage</div>
<div class="line"><span class="preprocessor">#coverage report will be generated in /tmp/OpenAB_build/tests/coveragereport</span></div>
</div><!-- fragment --><h2><a class="anchor" id="cppcheck"></a>
Cppcheck</h2>
<p>If Cppcheck if installed additional make taget will be available - <b>cppcheck</b> - that will run static code analysis using Cppcheck </p><div class="fragment"><div class="line">cd /tmp/OpenAB_build</div>
<div class="line">make cppcheck</div>
</div><!-- fragment --><h1><a class="anchor" id="mainPlugin"></a>
Plugins</h1>
<ol type="1">
<li><a class="el" href="pluginInterface.html">Plugin Interface (Overview and Examples) </a></li>
<li><a class="el" href="group__pluginGroup.html">List of available plugins </a> </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
